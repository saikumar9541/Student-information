FROM node:20.11.0-alpine3.18

WORKDIR /app
COPY package.json .
RUN npm i -g @vercel/ncc
RUN npm install --only=prod
COPY . .

RUN ncc build src/index.ts -o dist

CMD ["sh", "app.sh"]